<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link type="text/css" rel="stylesheet" href="assets/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <title>Crystal Game!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    <h1>CRYSTAL COLLECTOR</h1>
    <div class="rules">
        <h2>
           - RULES -
        </h2>
        <ul>
            <li>A randomly generated number will appear as your target number.</li>
            <li>Click on the crystals to add to your score below.</li>
            <li>BE CAREFUL! You don't want to go over the target number, or YOU LOSE!</li>
            <li>Match the number perfectly without going over and YOU WIN!</li>
        </ul>
    </div>
    
    <div class="crystals">
        <input type="image" src="assets/images/crystalBlue.jpg" name="blue" class="imgButton" id="blueCrystal" value="">
        <input type="image" src="assets/images/crystalGreen.jpg" name="green" class="imgButton" id="greenCrystal" value="">
        <input type="image" src="assets/images/crystalPink.jpg" name="pink" class="imgButton" id="pinkCrystal" value="">
        <input type="image" src="assets/images/crystalPurple.jpg" name="purple" class="imgButton" id="purpleCrystal" value="">
    </div>
    <div class="compNum">
        TARGET NUMBER:<span id="targetNum"> 0</span>
    </div>
    <div class="myNum">
        YOUR NUMBER:<span id="totalNumber"> 0</span>
    </div>
    <br><br><br>
    <div class="winner">
        TOTAL WINS:<span id="totalWins"></span>
    </div>
    <div class="loss">
        TOTAL LOSSES:<span id="totalLosses"></span>
    </div>

    <script type="text/javascript">
    
    $(document).ready(function() {

        //create variables for wins, losses, total score (so far).
        var randomNum;
        var wins = 0;
        var losses = 0;
        var scoreTotal = 0;
        //create variables for each crystal (since they will randomly generate a new value)
        var blueCrystal = 0;

        //create function to start game with random number and write it to the Target Num on the HTML doc
        //randomly generate a new number for each crystal and assign it to "value"
        //console log all the numbers so I don't go crazy testing it out!
        function initializeGame(){
            randomNum = Math.floor((Math.random() * (120-19) + 19));
            $("#targetNum").text(" " + randomNum);
            console.log(randomNum);
            var blueCrystal = Math.floor((Math.random() * 12) +1);
            $("#blueCrystal").attr("value", blueCrystal);
            console.log(blueCrystal);
            var greenCrystal = Math.floor((Math.random() * 12) +1);
            $("#greenCrystal").attr("value", greenCrystal);
            console.log(greenCrystal);
            var pinkCrystal = Math.floor((Math.random() * 12) +1);
            $("#pinkCrystal").attr("value", pinkCrystal);
            console.log(pinkCrystal);
            var purpleCrystal = Math.floor((Math.random() * 12) +1);
            $("#purpleCrystal").attr("value", purpleCrystal);
            console.log(purpleCrystal);
            scoreTotal = 0;
        };
        //run the function
        initializeGame();

        //win Game function
        function winGame() {
            alert("YOU WIN!");
            wins++;
            $("#totalWins").text(wins);
            initializeGame();
        };

        //lose Game function
        function loseGame() {
            alert("YOU LOSE!");
            losses++;
            $("#totalLosses").text(losses);
            initializeGame();
        };


        //If any crystal is clicked, take the value of that crystal
        $(".imgButton").on("click", function() {
            if (scoreTotal >= randomNum) {
                return;
            }
            var crystalValue = $(this).attr("value");
            //turn the value into an integer
            crystalValue = parseInt(crystalValue);
            //add the crystal's value to the score
            scoreTotal += crystalValue;
            //write the score onto the HTML
            $("#totalNumber").text(scoreTotal);
            if (scoreTotal > randomNum) {
                loseGame();
            } else if (scoreTotal === randomNum) {
                winGame();
            }
        });
    });
    
    </script>
</body>
</html>